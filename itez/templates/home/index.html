{% extends "layouts/base.html" %} {% block title %} Dashboard {% endblock %}

<!-- Specific CSS Plugins goes HERE  -->
{% block css_plugins %}

<link rel="stylesheet" href="/static/assets/js/select.dataTables.min.css" />
{% endblock css_plugins %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %} {% block content %}
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

<div class="content-wrapper">
  <div class="row">
    <div class="col-sm-12">
      <div class="home-tab">
        <div
          class="
            d-sm-flex
            align-items-center
            justify-content-between
            border-bottom
          "
        >
          <h2>Dashboard</h2>
        </div>
        <div class="tab-content tab-content-basic">
          <div
            class="tab-pane fade show active"
            id="overview"
            role="tabpanel"
            aria-labelledby="overview"
          >
          
          {% include "includes/notifications_modal.html" %}
            <div class="row">
              <div class="col-lg-8 d-flex flex-column">
                <div class="row flex-grow">
                  <div
                    class="col-12 col-lg-4 col-lg-12 grid-margin stretch-card"
                  >
                    <div class="card card-rounded">
                      <div class="card-body">
                        <div
                          class="
                            d-sm-flex
                            justify-content-between
                            align-items-start
                          "
                        >
                          <div>
                            <h4 class="card-title card-title-dash">
                              Weekly Visits
                            </h4>
                            <h5 class="card-subtitle card-subtitle-dash">
                              Hospital visits and segmentation accross the
                              country
                            </h5>
                          </div>
                          <div id="performance-line-legend"></div>
                        </div>
                        <div class="chartjs-wrapper mt-5">
                          <canvas id="performaneLine"></canvas>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-4 d-flex flex-column">
                <div class="row flex-grow">
                  <div class="col-md-6 col-lg-12 grid-margin stretch-card">
                    <div class="card bg-primary card-rounded" style="background: linear-gradient(
                          148.53deg, #6CBCFC -0.38%, #458DFC 101.5%);">
                      <div class="card-body pb-0">
                        <h4 class="card-title card-title-dash text-white mb-4">
                          Total Intersex Persons
                        </h4>
                        <div class="row">
                          <div class="col-sm-4">
                            <p class="status-summary-ight-white mb-1">
                              Countrywide
                            </p>
                            <h2 class="text-info" style="color: white">{{other}}</h2>
                          </div>
                          <div class="col-sm-8">
                            <div class="status-summary-chart-wrapper pb-4">
                              <canvas id="status-summary"></canvas>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6 col-lg-12 grid-margin stretch-card">
                    <div class="card card-rounded">
                      <div class="card-body">
                        <div class="row">
                          <div class="col-sm-6">
                            <div
                              class="
                                d-flex
                                justify-content-between
                                align-items-center
                                mb-2 mb-sm-0
                              "
                            >
                              <div class="circle-progress-width">
                                <div
                                  id="totalVisitors"
                                  class="progressbar-js-circle pr-2"
                                ></div>
                              </div>
                              <div>
                                <p class="text-small mb-2">Total Male</p>
                                <h4 class="mb-0 fw-bold">{{male}}</h4>
                              </div>
                            </div>
                          </div>
                          <div class="col-sm-6">
                            <div
                              class="
                                d-flex
                                justify-content-between
                                align-items-center
                              "
                            >
                              <div class="circle-progress-width">
                                <div
                                  id="visitperday"
                                  class="progressbar-js-circle pr-2"
                                ></div>
                              </div>
                              <div>
                                <p class="text-small mb-2">Total Females</p>
                                <h4 class="mb-0 fw-bold">{{female}}</h4>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-8 d-flex flex-column">
                <div class="row flex-grow">
                  <div class="col-12 grid-margin stretch-card">
                    <div class="card card-rounded">
                      <div class="card-body">
                        <div
                          class="
                            d-sm-flex
                            justify-content-between
                            align-items-start
                          "
                        >
                          <div>
                            <h4 class="card-title card-title-dash">
                              Service type Provincial overview
                            </h4>
                            <p class="card-subtitle card-subtitle-dash">
                              Service types statistics by province
                            </p>
                          </div>
                          <div>
                            <div class="dropdown">
                              <button
                                class="
                                  btn btn-secondary
                                  dropdown-toggle
                                  toggle-dark
                                  btn-lg
                                  mb-0
                                  me-0
                                "
                                type="button"
                                id="dropdownMenuButton2"
                                data-bs-toggle="dropdown"
                                aria-haspopup="true"
                                aria-expanded="false"
                              >
                                Lusaka Province
                              </button>
                              <div
                                class="dropdown-menu"
                                aria-labelledby="dropdownMenuButton2"
                              >
                                <a class="dropdown-item" href="#"
                                  >Southern Province</a
                                >
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="#"
                                  >Copperbelt Province</a
                                >
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="#"
                                  >Muchinga Province</a
                                >
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="#"
                                  >Western Province</a
                                >
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="#"
                                  >Eastern Province</a
                                >
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="#"
                                  >Northern Province</a
                                >
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="#"
                                  >Central Province</a
                                >
                              </div>
                            </div>
                          </div>
                        </div>
                        <div
                          class="
                            d-sm-flex
                            align-items-center
                            mt-1
                            justify-content-between
                          "
                        >
                          <div
                            class="
                              d-sm-flex
                              align-items-center
                              mt-4
                              justify-content-between
                            "
                          >
                            <h2 class="me-2 fw-bold">953</h2>
                            <h4 class="me-2">Total visits</h4>
                            <h4 class="text-success">(+1.37%)</h4>
                          </div>
                          <div class="me-3">
                            <div id="marketing-overview-legend"></div>
                          </div>
                        </div>
                        <div class="chartjs-bar-wrapper mt-3">
                          <canvas id="marketingOverview"></canvas>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-4 d-flex flex-column">
                <div class="row flex-grow">
                  <div class="col-12 grid-margin stretch-card">
                    <div class="card card-rounded">
                      <div class="card-body">
                        <div class="row">
                          <div class="col-lg-12">
                            <div
                              class="
                                d-flex
                                justify-content-between
                                align-items-center
                                mb-3
                              "
                            >
                              <h4 class="card-title card-title-dash">
                                By Sex Identification
                              </h4>
                            </div>
                            <canvas
                              class="my-auto"
                              id="doughnutChart"
                              height="200"
                            ></canvas>

                            <div
                              id="doughnut-chart-legend"
                              class="mt-5 text-center"
                            ></div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock content %}

<!-- Specific JS Plugins goes HERE  -->
{% block js_plugins %}
<script src="/static/assets/js/jquery-3.1.1.min.js"></script>
<script src="/static/assets/vendors/chart.js/Chart.min.js"></script>
<script src="/static/assets/vendors/bootstrap-datepicker/bootstrap-datepicker.min.js"></script>
<script src="/static/assets/vendors/progressbar.js/progressbar.min.js"></script>

{% endblock js_plugins %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
<!-- 
<script src="/static/assets/js/dashboard.js "></script> -->
<script src="/static/assets/js/Chart.roundedBarCharts.js"></script>
<script>
  (function ($) {
    "use strict";
    $(function () {
      if ($("#performaneLine").length) {
        var graphGradient = document
          .getElementById("performaneLine")
          .getContext("2d");
        var graphGradient2 = document
          .getElementById("performaneLine")
          .getContext("2d");
        var saleGradientBg = graphGradient.createLinearGradient(5, 0, 5, 100);
        saleGradientBg.addColorStop(0, "rgba(26, 115, 232, 0.18)");
        saleGradientBg.addColorStop(1, "rgba(26, 115, 232, 0.02)");
        var saleGradientBg2 = graphGradient2.createLinearGradient(
          100,
          0,
          50,
          150
        );
        saleGradientBg2.addColorStop(0, "rgba(0, 208, 255, 0.19)");
        saleGradientBg2.addColorStop(1, "rgba(0, 208, 255, 0.03)");
        var salesTopData = {
          labels: [
            "SUN",
            "sun",
            "MON",
            "mon",
            "TUE",
            "tue",
            "WED",
            "wed",
            "THU",
            "thu",
            "FRI",
            "fri",
            "SAT",
          ],
          datasets: [
            {
              label: "This week",
              data: [
                "{{sunday}}",
                110,
                "{{monday}}",
                290,
                "{{tuesday}}",
                115,
                "{{wednesday}}",
                170,
                "{{thurday}}",
                210,
                "{{friday}}",
                280,
                "{{saturday}}",
              ],
              backgroundColor: saleGradientBg,
              borderColor: ["#1F3BB3"],
              borderWidth: 1.5,
              fill: true, // 3: no fill
              pointBorderWidth: 1,
              pointRadius: [4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4],
              pointHoverRadius: [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
              pointBackgroundColor: [
                "#1F3BB3)",
                "#1F3BB3",
                "#1F3BB3",
                "#1F3BB3",
                "#1F3BB3)",
                "#1F3BB3",
                "#1F3BB3",
                "#1F3BB3",
                "#1F3BB3)",
                "#1F3BB3",
                "#1F3BB3",
                "#1F3BB3",
                "#1F3BB3)",
              ],
              pointBorderColor: [
                "#fff",
                "#fff",
                "#fff",
                "#fff",
                "#fff",
                "#fff",
                "#fff",
                "#fff",
                "#fff",
                "#fff",
                "#fff",
                "#fff",
                "#fff",
              ],
            },
            {
              label: "Last week",
              data: [30, 150, 190, 250, 120, 150, 130, 20, 30, 15, 40, 95, 180],
              backgroundColor: saleGradientBg2,
              borderColor: ["#52CDFF"],
              borderWidth: 1.5,
              fill: true, // 3: no fill
              pointBorderWidth: 1,
              pointRadius: [0, 0, 0, 4, 0],
              pointHoverRadius: [0, 0, 0, 2, 0],
              pointBackgroundColor: [
                "#52CDFF)",
                "#52CDFF",
                "#52CDFF",
                "#52CDFF",
                "#52CDFF)",
                "#52CDFF",
                "#52CDFF",
                "#52CDFF",
                "#52CDFF)",
                "#52CDFF",
                "#52CDFF",
                "#52CDFF",
                "#52CDFF)",
              ],
              pointBorderColor: [
                "#fff",
                "#fff",
                "#fff",
                "#fff",
                "#fff",
                "#fff",
                "#fff",
                "#fff",
                "#fff",
                "#fff",
                "#fff",
                "#fff",
                "#fff",
              ],
            },
          ],
        };

        var salesTopOptions = {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            yAxes: [
              {
                gridLines: {
                  display: true,
                  drawBorder: false,
                  color: "#F0F0F0",
                  zeroLineColor: "#F0F0F0",
                },
                ticks: {
                  beginAtZero: false,
                  autoSkip: true,
                  maxTicksLimit: 4,
                  fontSize: 10,
                  color: "#6B778C",
                },
              },
            ],
            xAxes: [
              {
                gridLines: {
                  display: false,
                  drawBorder: false,
                },
                ticks: {
                  beginAtZero: false,
                  autoSkip: true,
                  maxTicksLimit: 7,
                  fontSize: 10,
                  color: "#6B778C",
                },
              },
            ],
          },
          legend: false,
          legendCallback: function (chart) {
            var text = [];
            text.push('<div class="chartjs-legend"><ul>');
            for (var i = 0; i < chart.data.datasets.length; i++) {
              console.log(chart.data.datasets[i]); // see what's inside the obj.
              text.push("<li>");
              text.push(
                '<span style="background-color:' +
                  chart.data.datasets[i].borderColor +
                  '">' +
                  "</span>"
              );
              text.push(chart.data.datasets[i].label);
              text.push("</li>");
            }
            text.push("</ul></div>");
            return text.join("");
          },

          elements: {
            line: {
              tension: 0.4,
            },
          },
          tooltips: {
            backgroundColor: "rgba(31, 59, 179, 1)",
          },
        };
        var salesTop = new Chart(graphGradient, {
          type: "line",
          data: salesTopData,
          options: salesTopOptions,
        });
        document.getElementById("performance-line-legend").innerHTML =
          salesTop.generateLegend();
      }
      if ($("#performaneLine-dark").length) {
        var graphGradient = document
          .getElementById("performaneLine-dark")
          .getContext("2d");
        var graphGradient2 = document
          .getElementById("performaneLine-dark")
          .getContext("2d");
        var saleGradientBg = graphGradient.createLinearGradient(5, 0, 5, 100);
        saleGradientBg.addColorStop(0, "rgba(26, 115, 232, 0.18)");
        saleGradientBg.addColorStop(1, "rgba(34, 36, 55, 0.5)");
        var saleGradientBg2 = graphGradient2.createLinearGradient(
          10,
          0,
          0,
          150
        );
        saleGradientBg2.addColorStop(0, "rgba(0, 208, 255, 0.19)");
        saleGradientBg2.addColorStop(1, "rgba(34, 36, 55, 0.2)");
        var salesTopDataDark = {
          labels: [
            "SUN",
            "sun",
            "MON",
            "mon",
            "TUE",
            "tue",
            "WED",
            "wed",
            "THU",
            "thu",
            "FRI",
            "fri",
            "SAT",
          ],
          datasets: [
            {
              label: "# of Votes",
              data: [
                50, 110, 60, 290, 200, 115, 130, 170, 90, 210, 240, 280, 200,
              ],
              backgroundColor: saleGradientBg,
              borderColor: ["#1F3BB3"],
              borderWidth: 1.5,
              fill: true, // 3: no fill
              pointBorderWidth: 1,
              pointRadius: [4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4],
              pointHoverRadius: [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
              pointBackgroundColor: [
                "#1F3BB3)",
                "#1F3BB3",
                "#1F3BB3",
                "#1F3BB3",
                "#1F3BB3)",
                "#1F3BB3",
                "#1F3BB3",
                "#1F3BB3",
                "#1F3BB3)",
                "#1F3BB3",
                "#1F3BB3",
                "#1F3BB3",
                "#1F3BB3)",
              ],
              pointBorderColor: [
                "#222437",
                "#222437",
                "#222437",
                "#222437",
                "#222437",
                "#222437",
                "#222437",
                "#222437",
                "#222437",
                "#222437",
                "#222437",
                "#222437",
                "#222437",
              ],
            },
            {
              label: "# of Votes",
              data: [30, 150, 190, 250, 120, 150, 130, 20, 30, 15, 40, 95, 180],
              backgroundColor: saleGradientBg2,
              borderColor: ["#52CDFF"],
              borderWidth: 1.5,
              fill: true, // 3: no fill
              pointBorderWidth: 1,
              pointRadius: [0, 0, 0, 4, 0],
              pointHoverRadius: [0, 0, 0, 2, 0],
              pointBackgroundColor: [
                "#52CDFF)",
                "#52CDFF",
                "#52CDFF",
                "#52CDFF",
                "#52CDFF)",
                "#52CDFF",
                "#52CDFF",
                "#52CDFF",
                "#52CDFF)",
                "#52CDFF",
                "#52CDFF",
                "#52CDFF",
                "#52CDFF)",
              ],
              pointBorderColor: [
                "#222437",
                "#222437",
                "#222437",
                "#222437",
                "#222437",
                "#222437",
                "#222437",
                "#222437",
                "#222437",
                "#222437",
                "#222437",
                "#222437",
                "#222437",
              ],
            },
          ],
        };

        var salesTopOptionsDark = {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            yAxes: [
              {
                gridLines: {
                  display: true,
                  drawBorder: false,
                  color: "rgba(255,255,255,.05)",
                  zeroLineColor: "rgba(255,255,255,.05)",
                },
                ticks: {
                  beginAtZero: false,
                  autoSkip: true,
                  maxTicksLimit: 4,
                  fontSize: 10,
                  color: "#6B778C",
                },
              },
            ],
            xAxes: [
              {
                gridLines: {
                  display: false,
                  drawBorder: false,
                },
                ticks: {
                  beginAtZero: false,
                  autoSkip: true,
                  maxTicksLimit: 7,
                  fontSize: 10,
                  color: "#6B778C",
                },
              },
            ],
          },
          legend: false,
          legendCallback: function (chart) {
            var text = [];
            text.push('<div class="chartjs-legend"><ul>');
            for (var i = 0; i < chart.data.datasets.length; i++) {
              console.log(chart.data.datasets[i]); // see what's inside the obj.
              text.push("<li>");
              text.push(
                '<span style="background-color:' +
                  chart.data.datasets[i].borderColor +
                  '">' +
                  "</span>"
              );
              text.push(chart.data.datasets[i].label);
              text.push("</li>");
            }
            text.push("</ul></div>");
            return text.join("");
          },

          elements: {
            line: {
              tension: 0.4,
            },
          },
          tooltips: {
            backgroundColor: "rgba(31, 59, 179, 1)",
          },
        };
        var salesTopDark = new Chart(graphGradient, {
          type: "line",
          data: salesTopDataDark,
          options: salesTopOptionsDark,
        });
        document.getElementById("performance-line-legend-dark").innerHTML =
          salesTopDark.generateLegend();
      }
      if ($("#datepicker-popup").length) {
        $("#datepicker-popup").datepicker({
          enableOnReadonly: true,
          todayHighlight: true,
        });
        $("#datepicker-popup").datepicker("setDate", "0");
      }
      if ($("#status-summary").length) {
        var statusSummaryChartCanvas = document
          .getElementById("status-summary")
          .getContext("2d");
        var statusData = {
          labels: ["SUN", "MON", "TUE", "WED", "THU", "FRI"],
          datasets: [
            {
              label: "# of Votes",
              data: [50, 68, 70, 10, 12, 80],
              backgroundColor: "#ffcc00",
              borderColor: ["#01B6A0"],
              borderWidth: 2,
              fill: false, // 3: no fill
              pointBorderWidth: 0,
              pointRadius: [0, 0, 0, 0, 0, 0],
              pointHoverRadius: [0, 0, 0, 0, 0, 0],
            },
          ],
        };

        var statusOptions = {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            yAxes: [
              {
                display: false,
                gridLines: {
                  display: false,
                  drawBorder: false,
                  color: "#F0F0F0",
                },
                ticks: {
                  beginAtZero: false,
                  autoSkip: true,
                  maxTicksLimit: 4,
                  fontSize: 10,
                  color: "#6B778C",
                },
              },
            ],
            xAxes: [
              {
                display: false,
                gridLines: {
                  display: false,
                  drawBorder: false,
                },
                ticks: {
                  beginAtZero: false,
                  autoSkip: true,
                  maxTicksLimit: 7,
                  fontSize: 10,
                  color: "#6B778C",
                },
              },
            ],
          },
          legend: false,

          elements: {
            line: {
              tension: 0.4,
            },
          },
          tooltips: {
            backgroundColor: "rgba(31, 59, 179, 1)",
          },
        };
        var statusSummaryChart = new Chart(statusSummaryChartCanvas, {
          type: "line",
          data: statusData,
          options: statusOptions,
        });
      }
      if ($("#totalVisitors").length) {
        var bar = new ProgressBar.Circle(totalVisitors, {
          color: "#fff",
          // This has to be the same size as the maximum width to
          // prevent clipping
          strokeWidth: 15,
          trailWidth: 15,
          easing: "easeInOut",
          duration: 1400,
          text: {
            autoStyleContainer: false,
          },
          from: {
            color: "#52CDFF",
            width: 15,
          },
          to: {
            color: "#677ae4",
            width: 15,
          },
          // Set default step function for all animate calls
          step: function (state, circle) {
            circle.path.setAttribute("stroke", state.color);
            circle.path.setAttribute("stroke-width", state.width);

            var value = Math.round(circle.value() * 100);
            if (value === 0) {
              circle.setText("");
            } else {
              circle.setText(value);
            }
          },
        });

        bar.text.style.fontSize = "0rem";
        bar.animate(0.64); // Number from 0.0 to 1.0
      }
      if ($("#visitperday").length) {
        var bar = new ProgressBar.Circle(visitperday, {
          color: "#fff",
          // This has to be the same size as the maximum width to
          // prevent clipping
          strokeWidth: 15,
          trailWidth: 15,
          easing: "easeInOut",
          duration: 1400,
          text: {
            autoStyleContainer: false,
          },
          from: {
            color: "#34B1AA",
            width: 15,
          },
          to: {
            color: "#677ae4",
            width: 15,
          },
          // Set default step function for all animate calls
          step: function (state, circle) {
            circle.path.setAttribute("stroke", state.color);
            circle.path.setAttribute("stroke-width", state.width);

            var value = Math.round(circle.value() * 100);
            if (value === 0) {
              circle.setText("");
            } else {
              circle.setText(value);
            }
          },
        });

        bar.text.style.fontSize = "0rem";
        bar.animate(0.34); // Number from 0.0 to 1.0
      }
      if ($("#marketingOverview").length) {
        var marketingOverviewChart = document
          .getElementById("marketingOverview")
          .getContext("2d");
        var marketingOverviewData = {
          labels: [
            "JAN",
            "FEB",
            "MAR",
            "APR",
            "MAY",
            "JUN",
            "JUL",
            "AUG",
            "SEP",
            "OCT",
            "NOV",
            "DEC",
          ],
          datasets: [
            {
              label: "Last week",
              data: [
                110, 220, 200, 190, 220, 110, 210, 110, 205, 202, 201, 150,
              ],
              backgroundColor: "#52CDFF",
              borderColor: ["#52CDFF"],
              borderWidth: 0,
              fill: true, // 3: no fill
            },
            {
              label: "This week",
              data: [
                215, 290, 210, 250, 290, 230, 290, 210, 280, 220, 190, 300,
              ],
              backgroundColor: "#1F3BB3",
              borderColor: ["#1F3BB3"],
              borderWidth: 0,
              fill: true, // 3: no fill
            },
          ],
        };

        var marketingOverviewOptions = {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            yAxes: [
              {
                gridLines: {
                  display: true,
                  drawBorder: false,
                  color: "#F0F0F0",
                  zeroLineColor: "#F0F0F0",
                },
                ticks: {
                  beginAtZero: true,
                  autoSkip: true,
                  maxTicksLimit: 5,
                  fontSize: 10,
                  color: "#6B778C",
                },
              },
            ],
            xAxes: [
              {
                stacked: true,
                barPercentage: 0.35,
                gridLines: {
                  display: false,
                  drawBorder: false,
                },
                ticks: {
                  beginAtZero: false,
                  autoSkip: true,
                  maxTicksLimit: 12,
                  fontSize: 10,
                  color: "#6B778C",
                },
              },
            ],
          },
          legend: false,
          legendCallback: function (chart) {
            var text = [];
            text.push('<div class="chartjs-legend"><ul>');
            for (var i = 0; i < chart.data.datasets.length; i++) {
              console.log(chart.data.datasets[i]); // see what's inside the obj.
              text.push('<li class="text-muted text-small">');
              text.push(
                '<span style="background-color:' +
                  chart.data.datasets[i].borderColor +
                  '">' +
                  "</span>"
              );
              text.push(chart.data.datasets[i].label);
              text.push("</li>");
            }
            text.push("</ul></div>");
            return text.join("");
          },

          elements: {
            line: {
              tension: 0.4,
            },
          },
          tooltips: {
            backgroundColor: "rgba(31, 59, 179, 1)",
          },
        };
        var marketingOverview = new Chart(marketingOverviewChart, {
          type: "bar",
          data: marketingOverviewData,
          options: marketingOverviewOptions,
        });
        document.getElementById("marketing-overview-legend").innerHTML =
          marketingOverview.generateLegend();
      }
      if ($("#marketingOverview-dark").length) {
        var marketingOverviewChartDark = document
          .getElementById("marketingOverview-dark")
          .getContext("2d");
        var marketingOverviewDataDark = {
          labels: [
            "JAN",
            "FEB",
            "MAR",
            "APR",
            "MAY",
            "JUN",
            "JUL",
            "AUG",
            "SEP",
            "OCT",
            "NOV",
            "DEC",
          ],
          datasets: [
            {
              label: "OPD",
              data: [
                110, 220, 200, 190, 220, 110, 210, 110, 205, 202, 201, 150,
              ],
              backgroundColor: "#26A69A",
              borderColor: ["#26A69A"],
              borderWidth: 0,
              fill: true, // 3: no fill
            },
            {
              label: "ART",
              data: [
                215, 290, 210, 250, 290, 230, 290, 210, 280, 220, 190, 300,
              ],
              backgroundColor: "#8D6E63",
              borderColor: ["#8D6E63"],
              borderWidth: 0,
              fill: true, // 3: no fill
            },
          ],
        };

        var marketingOverviewOptionsDark = {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            yAxes: [
              {
                gridLines: {
                  display: true,
                  drawBorder: false,
                  color: "rgba(255,255,255,.05)",
                  zeroLineColor: "rgba(255,255,255,.05)",
                },
                ticks: {
                  beginAtZero: true,
                  autoSkip: true,
                  maxTicksLimit: 5,
                  fontSize: 10,
                  color: "#6B778C",
                },
              },
            ],
            xAxes: [
              {
                stacked: true,
                barPercentage: 0.35,
                gridLines: {
                  display: false,
                  drawBorder: false,
                },
                ticks: {
                  beginAtZero: false,
                  autoSkip: true,
                  maxTicksLimit: 7,
                  fontSize: 10,
                  color: "#6B778C",
                },
              },
            ],
          },
          legend: false,
          legendCallback: function (chart) {
            var text = [];
            text.push('<div class="chartjs-legend"><ul>');
            for (var i = 0; i < chart.data.datasets.length; i++) {
              console.log(chart.data.datasets[i]); // see what's inside the obj.
              text.push('<li class="text-muted text-small">');
              text.push(
                '<span style="background-color:' +
                  chart.data.datasets[i].borderColor +
                  '">' +
                  "</span>"
              );
              text.push(chart.data.datasets[i].label);
              text.push("</li>");
            }
            text.push("</ul></div>");
            return text.join("");
          },

          elements: {
            line: {
              tension: 0.4,
            },
          },
          tooltips: {
            backgroundColor: "rgba(31, 59, 179, 1)",
          },
        };
        var marketingOverviewDark = new Chart(marketingOverviewChartDark, {
          type: "bar",
          data: marketingOverviewDataDark,
          options: marketingOverviewOptionsDark,
        });
        document.getElementById("marketing-overview-legend").innerHTML =
          marketingOverviewDark.generateLegend();
      }
      if ($("#doughnutChart").length) {
        var doughnutChartCanvas = $("#doughnutChart").get(0).getContext("2d");
        var a = "{{male}}";
        var b = "{{female}}";

        var doughnutPieData = {
          datasets: [
            {
              data: [+a, +b],
              backgroundColor: ["#FF6E40", "#EEEEEE"],
              borderColor: ["#FF6E40", "#EEEEEE"],
            },
          ],

          // These labels appear in the legend and in the tooltips when hovering different arcs
          labels: ["Male", "Female"],
        };
        var doughnutPieOptions = {
          cutoutPercentage: 50,
          animationEasing: "easeOutBounce",
          animateRotate: true,
          animateScale: false,
          responsive: true,
          maintainAspectRatio: true,
          showScale: true,
          legend: false,
          legendCallback: function (chart) {
            var text = [];
            text.push(
              '<div class="chartjs-legend"><ul class="justify-content-center">'
            );
            for (var i = 0; i < chart.data.datasets[0].data.length; i++) {
              text.push(
                '<li><span style="background-color:' +
                  chart.data.datasets[0].backgroundColor[i] +
                  '">'
              );
              text.push("</span>");
              if (chart.data.labels[i]) {
                text.push(chart.data.labels[i]);
              }
              text.push("</li>");
            }
            text.push("</div></ul>");
            return text.join("");
          },

          layout: {
            padding: {
              left: 0,
              right: 0,
              top: 0,
              bottom: 0,
            },
          },
          tooltips: {
            callbacks: {
              title: function (tooltipItem, data) {
                return data["labels"][tooltipItem[0]["index"]];
              },
              label: function (tooltipItem, data) {
                return data["datasets"][0]["data"][tooltipItem["index"]];
              },
            },

            backgroundColor: "#fff",
            titleFontSize: 14,
            titleFontColor: "#0B0F32",
            bodyFontColor: "#737F8B",
            bodyFontSize: 11,
            displayColors: false,
          },
        };
        var doughnutChart = new Chart(doughnutChartCanvas, {
          type: "doughnut",
          data: doughnutPieData,
          options: doughnutPieOptions,
        });
        document.getElementById("doughnut-chart-legend").innerHTML =
          doughnutChart.generateLegend();
      }
      if ($("#leaveReport").length) {
        var leaveReportChart = document
          .getElementById("leaveReport")
          .getContext("2d");
        var leaveReportData = {
          labels: ["Jan", "Feb", "Mar", "Apr", "May"],
          datasets: [
            {
              label: "Last week",
              data: [18, 25, 39, 11, 24],
              backgroundColor: "#52CDFF",
              borderColor: ["#52CDFF"],
              borderWidth: 0,
              fill: true, // 3: no fill
            },
          ],
        };

        var leaveReportOptions = {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            yAxes: [
              {
                gridLines: {
                  display: true,
                  drawBorder: false,
                  color: "rgba(255,255,255,.05)",
                  zeroLineColor: "rgba(255,255,255,.05)",
                },
                ticks: {
                  beginAtZero: true,
                  autoSkip: true,
                  maxTicksLimit: 5,
                  fontSize: 10,
                  color: "#6B778C",
                },
              },
            ],
            xAxes: [
              {
                barPercentage: 0.5,
                gridLines: {
                  display: false,
                  drawBorder: false,
                },
                ticks: {
                  beginAtZero: false,
                  autoSkip: true,
                  maxTicksLimit: 7,
                  fontSize: 10,
                  color: "#6B778C",
                },
              },
            ],
          },
          legend: false,

          elements: {
            line: {
              tension: 0.4,
            },
          },
          tooltips: {
            backgroundColor: "rgba(31, 59, 179, 1)",
          },
        };
        var leaveReport = new Chart(leaveReportChart, {
          type: "bar",
          data: leaveReportData,
          options: leaveReportOptions,
        });
      }
      if ($("#leaveReport-dark").length) {
        var leaveReportChartDark = document
          .getElementById("leaveReport-dark")
          .getContext("2d");
        var leaveReportDataDark = {
          labels: ["JAN", "FEB", "MAR", "APR", "MAY"],
          datasets: [
            {
              label: "Last week",
              data: [18, 25, 39, 11, 24],
              backgroundColor: "#52CDFF",
              borderColor: ["#52CDFF"],
              borderWidth: 0,
              fill: true, // 3: no fill
            },
          ],
        };

        var leaveReportOptionsDark = {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            yAxes: [
              {
                gridLines: {
                  display: true,
                  drawBorder: false,
                  color: "#383e5d",
                  zeroLineColor: "#383e5d",
                },
                ticks: {
                  beginAtZero: true,
                  autoSkip: true,
                  maxTicksLimit: 5,
                  fontSize: 10,
                  color: "#6B778C",
                },
              },
            ],
            xAxes: [
              {
                barPercentage: 0.5,
                gridLines: {
                  display: false,
                  drawBorder: false,
                },
                ticks: {
                  beginAtZero: false,
                  autoSkip: true,
                  maxTicksLimit: 7,
                  fontSize: 10,
                  color: "#6B778C",
                },
              },
            ],
          },
          legend: false,

          elements: {
            line: {
              tension: 0.4,
            },
          },
          tooltips: {
            backgroundColor: "rgba(31, 59, 179, 1)",
          },
        };
        var leaveReportDark = new Chart(leaveReportChartDark, {
          type: "bar",
          data: leaveReportDataDark,
          options: leaveReportOptionsDark,
        });
      }
    });
  })(jQuery);
</script>

{% endblock javascripts %}

